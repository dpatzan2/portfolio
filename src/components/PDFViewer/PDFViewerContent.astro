---
// PDF Viewer Component - Estilo Ubuntu Evince/Document Viewer
const pdfPath = '/assets/cv Diego Patzan.pdf';
---

<div class="pdf-viewer h-full flex flex-col bg-[#2d2d2d]">
  <!-- Toolbar -->
  <div class="pdf-toolbar flex items-center justify-between px-3 py-2 bg-[#373737] border-b border-white/10">
    <div class="flex items-center gap-2">
      <!-- Zoom controls -->
      <button id="pdf-zoom-out" class="toolbar-btn" title="Reducir zoom">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/><line x1="8" x2="14" y1="11" y2="11"/></svg>
      </button>
      <span id="pdf-zoom-level" class="text-white text-sm min-w-[50px] text-center">100%</span>
      <button id="pdf-zoom-in" class="toolbar-btn" title="Aumentar zoom">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/><line x1="11" x2="11" y1="8" y2="14"/><line x1="8" x2="14" y1="11" y2="11"/></svg>
      </button>
      <button id="pdf-fit" class="toolbar-btn ml-2" title="Ajustar a ventana">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/></svg>
      </button>
    </div>
    
    <div class="flex items-center gap-2">
      <span class="text-white/60 text-sm">cv Diego Patzan.pdf</span>
    </div>
    
    <div class="flex items-center gap-2">
      <!-- Download button -->
      <a href={pdfPath} download="cv Diego Patzan.pdf" class="toolbar-btn" title="Descargar CV">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
      </a>
      <!-- Open in new tab -->
      <a href={pdfPath} target="_blank" class="toolbar-btn" title="Abrir en nueva pestaña">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
      </a>
    </div>
  </div>
  
  <!-- PDF Container -->
  <div id="pdf-container" class="flex-1 overflow-auto bg-[#525659] flex items-start justify-center p-4">
    <iframe 
      id="pdf-frame"
      src={pdfPath}
      class="w-full h-full bg-white shadow-2xl"
      style="min-height: 100%;"
      title="CV Diego Patzán"
    ></iframe>
  </div>
</div>

<script>
  // Zoom functionality
  let currentZoom = 100;
  const zoomStep = 25;
  const minZoom = 50;
  const maxZoom = 200;

  const zoomInBtn = document.getElementById('pdf-zoom-in');
  const zoomOutBtn = document.getElementById('pdf-zoom-out');
  const zoomLevel = document.getElementById('pdf-zoom-level');
  const fitBtn = document.getElementById('pdf-fit');
  const pdfFrame = document.getElementById('pdf-frame') as HTMLIFrameElement;
  const pdfContainer = document.getElementById('pdf-container');

  function updateZoom(zoom: number) {
    currentZoom = Math.max(minZoom, Math.min(maxZoom, zoom));
    if (zoomLevel) zoomLevel.textContent = `${currentZoom}%`;
    if (pdfFrame) {
      pdfFrame.style.width = `${currentZoom}%`;
      pdfFrame.style.height = `${currentZoom}%`;
      pdfFrame.style.minHeight = `${currentZoom}%`;
    }
  }

  zoomInBtn?.addEventListener('click', () => updateZoom(currentZoom + zoomStep));
  zoomOutBtn?.addEventListener('click', () => updateZoom(currentZoom - zoomStep));
  fitBtn?.addEventListener('click', () => updateZoom(100));
</script>

<style>
  .pdf-viewer {
    font-family: 'Ubuntu', 'Segoe UI', sans-serif;
  }

  .toolbar-btn {
    @apply p-1.5 rounded text-white/70 hover:text-white hover:bg-white/10 transition-all;
  }

  .toolbar-btn:active {
    @apply bg-white/20;
  }

  #pdf-container::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  #pdf-container::-webkit-scrollbar-track {
    background: #3d3d3d;
  }

  #pdf-container::-webkit-scrollbar-thumb {
    background: #6d6d6d;
    border-radius: 6px;
    border: 2px solid #3d3d3d;
  }

  #pdf-container::-webkit-scrollbar-thumb:hover {
    background: #8d8d8d;
  }

  #pdf-frame {
    border: none;
    transition: width 0.2s, height 0.2s;
  }
</style>
